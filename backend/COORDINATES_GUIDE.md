# Координаты элементов в PDF карте

## Размеры карты
- Ширина: 540 пунктов
- Высота: 320 пунктов

## Система координат PDF
⚠️ **ВАЖНО**: В PDF координата Y идет **снизу вверх**!
- (0, 0) - левый нижний угол
- (540, 320) - правый верхний угол

Поэтому используется формула: `y: height - offset`

## Лицевая сторона (card-front.pdf)

### Заголовок
```javascript
x: 100
y: 17 (от верха)
Шрифт: Inter-Bold, 18pt
Текст: "КАРТА ЭКСТРЕННОЙ ПОМОЩИ"
```

### Фото
```javascript
x: 24
y: height - 160 (60 от верха + 100 высота)
Размер: 100x100
```

### ФИО (динамические данные)
```javascript
Фамилия:
  x: 143
  y: height - 89
  Шрифт: Inter-Regular, 36pt

Имя:
  x: 143
  y: height - 123
  Шрифт: Inter-Regular, 36pt

Отчество:
  x: 143
  y: height - 157
  Шрифт: Inter-Regular, 36pt
```

### Заголовок "ЭКСТРЕННЫЕ КОНТАКТЫ"
```javascript
x: 24
y: 184 (от верха)
Шрифт: Inter-SemiBold, 12pt
```

### Контакт 1 (динамические данные)
```javascript
Отношение (Жена:, Муж:):
  x: 24
  y: height - 220
  Шрифт: Inter-Regular, 12pt

Имя контакта:
  x: 24
  y: height - 237
  Шрифт: Inter-Regular, 16pt

Телефон:
  x: 24
  y: height - 259
  Шрифт: Inter-Regular, 24pt
```

### Контакт 2 (динамические данные)
```javascript
Отношение:
  x: 281
  y: height - 220
  Шрифт: Inter-Regular, 12pt

Имя контакта:
  x: 281
  y: height - 237
  Шрифт: Inter-Regular, 16pt

Телефон:
  x: 281
  y: height - 259
  Шрифт: Inter-Regular, 24pt
```

### QR код сайта
```javascript
x: 24
y: height - 314
Размер: 32x32
```

### Текст "carthelp.ru"
```javascript
x: 64
y: 291 (от верха)
Шрифт: Inter-SemiBold, 15pt
```

### Номер "112"
```javascript
x: 470
y: 287 (от верха)
Шрифт: Inter-Bold, 26pt
```

## Как изменить координаты?

### 1. Для статических элементов (шаблон)
Редактируйте `backend/utils/createPdfTemplates.js`:

```javascript
doc.text('КАРТА ЭКСТРЕННОЙ ПОМОЩИ', 100, 17)
//                                    ↑    ↑
//                                    X    Y
```

Затем пересоздайте шаблон:
```bash
node utils/createPdfTemplates.js
```

### 2. Для динамических данных
Редактируйте `backend/utils/cardPdfGenerator.js`:

```javascript
firstPage.drawText(cardData.lastName, {
  x: 143,           // ← Измените X
  y: height - 89,   // ← Измените offset от верха
  size: 36,
  font: customFont,
});
```

## Советы по позиционированию

### Горизонтальное выравнивание (X)
- Левый край: 24
- Центр: 270 (540 / 2)
- Правый край: 516 (540 - 24)

### Вертикальное выравнивание (Y от верха)
- Заголовок: 15-20
- Основной контент: 60-260
- Нижний колонтитул: 280-310

### Размеры шрифтов
- Заголовки: 16-20pt
- ФИО: 32-36pt
- Подзаголовки: 12-14pt
- Телефоны: 20-24pt
- Мелкий текст: 9-11pt

## Отладка координат

Чтобы увидеть, где находится элемент:

1. Откройте `backend/test-pdf.js`
2. Запустите: `node test-pdf.js`
3. Откройте `backend/temp/test-front.pdf`
4. Проверьте позиции элементов
5. Скорректируйте координаты
6. Повторите

## Формула преобразования SVG → PDF

Если у вас есть координаты из SVG:

```javascript
// SVG координаты
const svgX = 143;
const svgY = 88.9805;

// PDF координаты
const pdfX = svgX;  // X остается тем же
const pdfY = HEIGHT - svgY;  // Y инвертируется

// В коде:
x: 143,
y: height - 89  // округлили 88.9805 до 89
```
